jQuery(document).ready(function(t){"use strict";var a,i=t("#mf_cat_banners_id"),r=t("#mf_cat_banners_link"),o=t("#mf_cat_banners"),s=o.find(".mf-cat-images");o.on("click",".upload_images_button",function(e){var n=t(this);e.preventDefault(),a||(a=wp.media.frames.downloadable_file=wp.media({multiple:!0})).on("select",function(){var e=a.state().get("selection"),t=i.val();e.map(function(e){if((e=e.toJSON()).id){t=t?t+","+e.id:e.id;var a=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;s.append('<li class="image" data-attachment_id="'+e.id+'"><img src="'+a+'" width="100px" height="100px" /><ul class="actions"><li><a href="#" class="delete" title="'+n.data("delete")+'">'+n.data("text")+"</a></li></ul></li>")}}),i.val(t)}),a.open()}),s.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,a){a.item.css("background-color","#f6f6f6")},stop:function(e,a){a.item.removeAttr("style")},update:function(){var a="";s.find("li.image").css("cursor","default").each(function(){var e=t(this).attr("data-attachment_id");a=a+e+","}),i.val(a)}}),o.on("click","a.delete",function(){t(this).closest("li.image").remove();var a="";return s.find("li.image").css("cursor","default").each(function(){var e=t(this).attr("data-attachment_id");a=a+e+","}),i.val(a),!1});var n,l=t("#mf_cat_banners_2_id"),c=t("#mf-cat-banners_2_link"),d=t("#mf_cat_banners-2"),f=d.find(".mf-cat-image");l.val()||d.find(".remove_banner_2_button").hide(),d.on("click",".upload_banner_2_button",function(e){e.preventDefault(),n||(n=wp.media.frames.downloadable_file=wp.media({multiple:!1})).on("select",function(){var e=n.state().get("selection").first().toJSON();if(e.id){var a=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;l.val(e.id),d.find(".remove_banner_2_button").show(),f.attr("src",a)}}),n.open()}),d.on("click",".remove_banner_2_button",function(){var e=d.data("rel");return f.attr("src",e),l.val(""),t(this).hide(),!1}),t(document).ajaxComplete(function(e,a,t){if(a&&4===a.readyState&&200===a.status&&t.data&&0<=t.data.indexOf("action=add-tag")){var n=wpAjax.parseAjaxResponse(a.responseXML,"ajax-response");if(!n||n.errors)return;return o.find("li.image").remove(),i.val(""),r.val(""),l.val(""),c.val(""),f.attr("src",d.data("rel")),void d.find(".remove_banner_2_button").hide()}}),t("#mf_cat_layout").on("change",function(){v(t(this).val())}).trigger("change");var m=t(".mf-cat-banners-group"),u=t(".mf-cat-banners-2-group");function v(e){var a=t("#mf-custom-elements");"0"==e?a.hide():(a.show(),a.find(".mf-custom-elements").hide(),a.find("#mf-custom-elements-"+e).show())}t("#parent").on("change",function(){var e=t("#mf_cat_layout").val();if("-1"!=t(this).val()){v(e),m.hide();var a=t(this).find("option:selected").attr("class");console.log(a),"level-0"==a||void 0===a?u.show():u.hide()}else m.show(),u.show(),v(e)}).trigger("change")});